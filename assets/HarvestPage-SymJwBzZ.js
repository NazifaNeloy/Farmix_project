const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B08RLEBq.js","assets/ui-BW4q4lGy.js","assets/vendor-CxeeMcKR.js","assets/firebase-BPVtm2U-.js","assets/index-CSSKjf-2.css"])))=>i.map(i=>d[i]);
import{e as Ie,t as qe,f as ze,j as e,z as Oe,h as $e,x as xt,E as pt,G as lt,i as yt,R as Ue,H as bt,J as vt,N as wt,O as jt,V as Xe,Z as Nt,_ as kt,$ as St,a0 as _t,a1 as Dt,a2 as je,k as Ee,l as Pe,B as xe,a3 as Ct,a4 as ct,a5 as dt,d as Mt,a6 as Ot,a7 as Et,a8 as Pt,a9 as Tt,X as Rt,D as Lt}from"./ui-BW4q4lGy.js";import{g as Wt,d as Ae,r as X,L as At}from"./vendor-CxeeMcKR.js";import{D as Bt}from"./DashboardLayout-Me5dofxf.js";import{a as Ne,b as Re,u as ye,_ as Ge,c as ut,d as Qe}from"./index-B08RLEBq.js";import{c as Je,R as Ft,f as It}from"./weatherService--djAQi4h.js";import{x as Ke,n as Ve}from"./firebase-BPVtm2U-.js";var Me={exports:{}};var zt=Me.exports,Ze;function $t(){return Ze||(Ze=1,(function(r,t){((s,a)=>{r.exports=a()})(zt,function s(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},n,u=!a.document&&!!a.postMessage,m=a.IS_PAPA_WORKER||!1,g={},h=0,l={};function f(i){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(o){var c=re(o);c.chunkSize=parseInt(c.chunkSize),o.step||o.chunk||(c.chunkSize=null),this._handle=new p(c),(this._handle.streamer=this)._config=c}).call(this,i),this.parseChunk=function(o,c){var b=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<b){let D=this._config.newline;D||(y=this._config.quoteChar||'"',D=this._handle.guessLineEndings(o,y)),o=[...o.split(D).slice(b)].join(D)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(y=this._config.beforeFirstChunk(o))!==void 0&&(o=y),this.isFirstChunk=!1,this._halted=!1;var b=this._partialLine+o,y=(this._partialLine="",this._handle.parse(b,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(o=y.meta.cursor,b=(this._finished||(this._partialLine=b.substring(o-this._baseIndex),this._baseIndex=o),y&&y.data&&(this._rowCount+=y.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),m)a.postMessage({results:y,workerId:l.WORKER_ID,finished:b});else if(R(this._config.chunk)&&!c){if(this._config.chunk(y,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=y=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(y.data),this._completeResults.errors=this._completeResults.errors.concat(y.errors),this._completeResults.meta=y.meta),this._completed||!b||!R(this._config.complete)||y&&y.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),b||y&&y.meta.paused||this._nextChunk(),y}this._halted=!0},this._sendError=function(o){R(this._config.error)?this._config.error(o):m&&this._config.error&&a.postMessage({workerId:l.WORKER_ID,error:o,finished:!1})}}function d(i){var o;(i=i||{}).chunkSize||(i.chunkSize=l.RemoteChunkSize),f.call(this,i),this._nextChunk=u?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(c){this._input=c,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(o=new XMLHttpRequest,this._config.withCredentials&&(o.withCredentials=this._config.withCredentials),u||(o.onload=se(this._chunkLoaded,this),o.onerror=se(this._chunkError,this)),o.open(this._config.downloadRequestBody?"POST":"GET",this._input,!u),this._config.downloadRequestHeaders){var c,b=this._config.downloadRequestHeaders;for(c in b)o.setRequestHeader(c,b[c])}var y;this._config.chunkSize&&(y=this._start+this._config.chunkSize-1,o.setRequestHeader("Range","bytes="+this._start+"-"+y));try{o.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}u&&o.status===0&&this._chunkError()}},this._chunkLoaded=function(){o.readyState===4&&(o.status<200||400<=o.status?this._chunkError():(this._start+=this._config.chunkSize||o.responseText.length,this._finished=!this._config.chunkSize||this._start>=(c=>(c=c.getResponseHeader("Content-Range"))!==null?parseInt(c.substring(c.lastIndexOf("/")+1)):-1)(o),this.parseChunk(o.responseText)))},this._chunkError=function(c){c=o.statusText||c,this._sendError(new Error(c))}}function w(i){(i=i||{}).chunkSize||(i.chunkSize=l.LocalChunkSize),f.call(this,i);var o,c,b=typeof FileReader<"u";this.stream=function(y){this._input=y,c=y.slice||y.webkitSlice||y.mozSlice,b?((o=new FileReader).onload=se(this._chunkLoaded,this),o.onerror=se(this._chunkError,this)):o=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),y=c.call(y,this._start,D)),o.readAsText(y,this._config.encoding));b||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(o.error)}}function x(i){var o;f.call(this,i=i||{}),this.stream=function(c){return o=c,this._nextChunk()},this._nextChunk=function(){var c,b;if(!this._finished)return c=this._config.chunkSize,o=c?(b=o.substring(0,c),o.substring(c)):(b=o,""),this._finished=!o,this.parseChunk(b)}}function P(i){f.call(this,i=i||{});var o=[],c=!0,b=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){b&&o.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),o.length?this.parseChunk(o.shift()):c=!0},this._streamData=se(function(y){try{o.push(typeof y=="string"?y:y.toString(this._config.encoding)),c&&(c=!1,this._checkIsFinished(),this.parseChunk(o.shift()))}catch(D){this._streamError(D)}},this),this._streamError=se(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=se(function(){this._streamCleanUp(),b=!0,this._streamData("")},this),this._streamCleanUp=se(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function p(i){var o,c,b,y,D=Math.pow(2,53),G=-D,ae=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,C=this,z=0,j=0,Z=!1,k=!1,M=[],v={data:[],errors:[],meta:{}};function Q(O){return i.skipEmptyLines==="greedy"?O.join("").trim()==="":O.length===1&&O[0].length===0}function U(){if(v&&b&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),b=!1),i.skipEmptyLines&&(v.data=v.data.filter(function(N){return!Q(N)})),V()){let N=function(H,J){R(i.transformHeader)&&(H=i.transformHeader(H,J)),M.push(H)};if(v)if(Array.isArray(v.data[0])){for(var O=0;V()&&O<v.data.length;O++)v.data[O].forEach(N);v.data.splice(0,1)}else v.data.forEach(N)}function T(N,H){for(var J=i.header?{}:[],W=0;W<N.length;W++){var A=W,E=N[W],E=((le,S)=>(I=>(i.dynamicTypingFunction&&i.dynamicTyping[I]===void 0&&(i.dynamicTyping[I]=i.dynamicTypingFunction(I)),(i.dynamicTyping[I]||i.dynamicTyping)===!0))(le)?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&((I=>{if(ae.test(I)&&(I=parseFloat(I),G<I&&I<D))return 1})(S)?parseFloat(S):ne.test(S)?new Date(S):S===""?null:S):S)(A=i.header?W>=M.length?"__parsed_extra":M[W]:A,E=i.transform?i.transform(E,A):E);A==="__parsed_extra"?(J[A]=J[A]||[],J[A].push(E)):J[A]=E}return i.header&&(W>M.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+M.length+" fields but parsed "+W,j+H):W<M.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+M.length+" fields but parsed "+W,j+H)),J}var $;v&&(i.header||i.dynamicTyping||i.transform)&&($=1,!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(T),$=v.data.length):v.data=T(v.data,0),i.header&&v.meta&&(v.meta.fields=M),j+=$)}function V(){return i.header&&M.length===0}function ie(O,T,$,N){O={type:O,code:T,message:$},N!==void 0&&(O.row=N),v.errors.push(O)}R(i.step)&&(y=i.step,i.step=function(O){v=O,V()?U():(U(),v.data.length!==0&&(z+=O.data.length,i.preview&&z>i.preview?c.abort():(v.data=v.data[0],y(v,C))))}),this.parse=function(O,T,$){var N=i.quoteChar||'"',N=(i.newline||(i.newline=this.guessLineEndings(O,N)),b=!1,i.delimiter?R(i.delimiter)&&(i.delimiter=i.delimiter(O),v.meta.delimiter=i.delimiter):((N=((H,J,W,A,E)=>{var le,S,I,me;E=E||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var be=0;be<E.length;be++){for(var ce,ke=E[be],ee=0,de=0,K=0,te=(I=void 0,new B({comments:A,delimiter:ke,newline:J,preview:10}).parse(H)),he=0;he<te.data.length;he++)W&&Q(te.data[he])?K++:(ce=te.data[he].length,de+=ce,I===void 0?I=ce:0<ce&&(ee+=Math.abs(ce-I),I=ce));0<te.data.length&&(de/=te.data.length-K),(S===void 0||ee<=S)&&(me===void 0||me<de)&&1.99<de&&(S=ee,le=ke,me=de)}return{successful:!!(i.delimiter=le),bestDelimiter:le}})(O,i.newline,i.skipEmptyLines,i.comments,i.delimitersToGuess)).successful?i.delimiter=N.bestDelimiter:(b=!0,i.delimiter=l.DefaultDelimiter),v.meta.delimiter=i.delimiter),re(i));return i.preview&&i.header&&N.preview++,o=O,c=new B(N),v=c.parse(o,T,$),U(),Z?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return Z},this.pause=function(){Z=!0,c.abort(),o=R(i.chunk)?"":o.substring(c.getCharIndex())},this.resume=function(){C.streamer._halted?(Z=!1,C.streamer.parseChunk(o,!0)):setTimeout(C.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,c.abort(),v.meta.aborted=!0,R(i.complete)&&i.complete(v),o=""},this.guessLineEndings=function(H,N){H=H.substring(0,1048576);var N=new RegExp(_(N)+"([^]*?)"+_(N),"gm"),$=(H=H.replace(N,"")).split("\r"),N=H.split(`
`),H=1<N.length&&N[0].length<$[0].length;if($.length===1||H)return`
`;for(var J=0,W=0;W<$.length;W++)$[W][0]===`
`&&J++;return J>=$.length/2?`\r
`:"\r"}}function _(i){return i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function B(i){var o=(i=i||{}).delimiter,c=i.newline,b=i.comments,y=i.step,D=i.preview,G=i.fastMode,ae=null,ne=!1,C=i.quoteChar==null?'"':i.quoteChar,z=C;if(i.escapeChar!==void 0&&(z=i.escapeChar),(typeof o!="string"||-1<l.BAD_DELIMITERS.indexOf(o))&&(o=","),b===o)throw new Error("Comment character same as delimiter");b===!0?b="#":(typeof b!="string"||-1<l.BAD_DELIMITERS.indexOf(b))&&(b=!1),c!==`
`&&c!=="\r"&&c!==`\r
`&&(c=`
`);var j=0,Z=!1;this.parse=function(k,M,v){if(typeof k!="string")throw new Error("Input must be a string");var Q=k.length,U=o.length,V=c.length,ie=b.length,O=R(y),T=[],$=[],N=[],H=j=0;if(!k)return ee();if(G||G!==!1&&k.indexOf(C)===-1){for(var J=k.split(c),W=0;W<J.length;W++){if(N=J[W],j+=N.length,W!==J.length-1)j+=c.length;else if(v)return ee();if(!b||N.substring(0,ie)!==b){if(O){if(T=[],me(N.split(o)),de(),Z)return ee()}else me(N.split(o));if(D&&D<=W)return T=T.slice(0,D),ee(!0)}}return ee()}for(var A=k.indexOf(o,j),E=k.indexOf(c,j),le=new RegExp(_(z)+_(C),"g"),S=k.indexOf(C,j);;)if(k[j]===C)for(S=j,j++;;){if((S=k.indexOf(C,S+1))===-1)return v||$.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:j}),ce();if(S===Q-1)return ce(k.substring(j,S).replace(le,C));if(C===z&&k[S+1]===z)S++;else if(C===z||S===0||k[S-1]!==z){A!==-1&&A<S+1&&(A=k.indexOf(o,S+1));var I=be((E=E!==-1&&E<S+1?k.indexOf(c,S+1):E)===-1?A:Math.min(A,E));if(k.substr(S+1+I,U)===o){N.push(k.substring(j,S).replace(le,C)),k[j=S+1+I+U]!==C&&(S=k.indexOf(C,j)),A=k.indexOf(o,j),E=k.indexOf(c,j);break}if(I=be(E),k.substring(S+1+I,S+1+I+V)===c){if(N.push(k.substring(j,S).replace(le,C)),ke(S+1+I+V),A=k.indexOf(o,j),S=k.indexOf(C,j),O&&(de(),Z))return ee();if(D&&T.length>=D)return ee(!0);break}$.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:j}),S++}}else if(b&&N.length===0&&k.substring(j,j+ie)===b){if(E===-1)return ee();j=E+V,E=k.indexOf(c,j),A=k.indexOf(o,j)}else if(A!==-1&&(A<E||E===-1))N.push(k.substring(j,A)),j=A+U,A=k.indexOf(o,j);else{if(E===-1)break;if(N.push(k.substring(j,E)),ke(E+V),O&&(de(),Z))return ee();if(D&&T.length>=D)return ee(!0)}return ce();function me(K){T.push(K),H=j}function be(K){var te=0;return te=K!==-1&&(K=k.substring(S+1,K))&&K.trim()===""?K.length:te}function ce(K){return v||(K===void 0&&(K=k.substring(j)),N.push(K),j=Q,me(N),O&&de()),ee()}function ke(K){j=K,me(N),N=[],E=k.indexOf(c,j)}function ee(K){if(i.header&&!M&&T.length&&!ne){var te=T[0],he=Object.create(null),We=new Set(te);let He=!1;for(let ve=0;ve<te.length;ve++){let ue=te[ve];if(he[ue=R(i.transformHeader)?i.transformHeader(ue,ve):ue]){let Se,Ye=he[ue];for(;Se=ue+"_"+Ye,Ye++,We.has(Se););We.add(Se),te[ve]=Se,he[ue]++,He=!0,(ae=ae===null?{}:ae)[Se]=ue}else he[ue]=1,te[ve]=ue;We.add(ue)}He&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:T,errors:$,meta:{delimiter:o,linebreak:c,aborted:Z,truncated:!!K,cursor:H+(M||0),renamedHeaders:ae}}}function de(){y(ee()),T=[],$=[]}},this.abort=function(){Z=!0},this.getCharIndex=function(){return j}}function q(i){var o=i.data,c=g[o.workerId],b=!1;if(o.error)c.userError(o.error,o.file);else if(o.results&&o.results.data){var y={abort:function(){b=!0,F(o.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Y,resume:Y};if(R(c.userStep)){for(var D=0;D<o.results.data.length&&(c.userStep({data:o.results.data[D],errors:o.results.errors,meta:o.results.meta},y),!b);D++);delete o.results}else R(c.userChunk)&&(c.userChunk(o.results,y,o.file),delete o.results)}o.finished&&!b&&F(o.workerId,o.results)}function F(i,o){var c=g[i];R(c.userComplete)&&c.userComplete(o),c.terminate(),delete g[i]}function Y(){throw new Error("Not implemented.")}function re(i){if(typeof i!="object"||i===null)return i;var o,c=Array.isArray(i)?[]:{};for(o in i)c[o]=re(i[o]);return c}function se(i,o){return function(){i.apply(o,arguments)}}function R(i){return typeof i=="function"}return l.parse=function(i,o){var c=(o=o||{}).dynamicTyping||!1;if(R(c)&&(o.dynamicTypingFunction=c,c={}),o.dynamicTyping=c,o.transform=!!R(o.transform)&&o.transform,!o.worker||!l.WORKERS_SUPPORTED)return c=null,l.NODE_STREAM_INPUT,typeof i=="string"?(i=(b=>b.charCodeAt(0)!==65279?b:b.slice(1))(i),c=new(o.download?d:x)(o)):i.readable===!0&&R(i.read)&&R(i.on)?c=new P(o):(a.File&&i instanceof File||i instanceof Object)&&(c=new w(o)),c.stream(i);(c=(()=>{var b;return!!l.WORKERS_SUPPORTED&&(b=(()=>{var y=a.URL||a.webkitURL||null,D=s.toString();return l.BLOB_URL||(l.BLOB_URL=y.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(b=new a.Worker(b)).onmessage=q,b.id=h++,g[b.id]=b)})()).userStep=o.step,c.userChunk=o.chunk,c.userComplete=o.complete,c.userError=o.error,o.step=R(o.step),o.chunk=R(o.chunk),o.complete=R(o.complete),o.error=R(o.error),delete o.worker,c.postMessage({input:i,config:o,workerId:c.id})},l.unparse=function(i,o){var c=!1,b=!0,y=",",D=`\r
`,G='"',ae=G+G,ne=!1,C=null,z=!1,j=((()=>{if(typeof o=="object"){if(typeof o.delimiter!="string"||l.BAD_DELIMITERS.filter(function(M){return o.delimiter.indexOf(M)!==-1}).length||(y=o.delimiter),typeof o.quotes!="boolean"&&typeof o.quotes!="function"&&!Array.isArray(o.quotes)||(c=o.quotes),typeof o.skipEmptyLines!="boolean"&&typeof o.skipEmptyLines!="string"||(ne=o.skipEmptyLines),typeof o.newline=="string"&&(D=o.newline),typeof o.quoteChar=="string"&&(G=o.quoteChar),typeof o.header=="boolean"&&(b=o.header),Array.isArray(o.columns)){if(o.columns.length===0)throw new Error("Option columns is empty");C=o.columns}o.escapeChar!==void 0&&(ae=o.escapeChar+G),o.escapeFormulae instanceof RegExp?z=o.escapeFormulae:typeof o.escapeFormulae=="boolean"&&o.escapeFormulae&&(z=/^[=+\-@\t\r].*$/)}})(),new RegExp(_(G),"g"));if(typeof i=="string"&&(i=JSON.parse(i)),Array.isArray(i)){if(!i.length||Array.isArray(i[0]))return Z(null,i,ne);if(typeof i[0]=="object")return Z(C||Object.keys(i[0]),i,ne)}else if(typeof i=="object")return typeof i.data=="string"&&(i.data=JSON.parse(i.data)),Array.isArray(i.data)&&(i.fields||(i.fields=i.meta&&i.meta.fields||C),i.fields||(i.fields=Array.isArray(i.data[0])?i.fields:typeof i.data[0]=="object"?Object.keys(i.data[0]):[]),Array.isArray(i.data[0])||typeof i.data[0]=="object"||(i.data=[i.data])),Z(i.fields||[],i.data||[],ne);throw new Error("Unable to serialize unrecognized input");function Z(M,v,Q){var U="",V=(typeof M=="string"&&(M=JSON.parse(M)),typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(M)&&0<M.length),ie=!Array.isArray(v[0]);if(V&&b){for(var O=0;O<M.length;O++)0<O&&(U+=y),U+=k(M[O],O);0<v.length&&(U+=D)}for(var T=0;T<v.length;T++){var $=(V?M:v[T]).length,N=!1,H=V?Object.keys(v[T]).length===0:v[T].length===0;if(Q&&!V&&(N=Q==="greedy"?v[T].join("").trim()==="":v[T].length===1&&v[T][0].length===0),Q==="greedy"&&V){for(var J=[],W=0;W<$;W++){var A=ie?M[W]:W;J.push(v[T][A])}N=J.join("").trim()===""}if(!N){for(var E=0;E<$;E++){0<E&&!H&&(U+=y);var le=V&&ie?M[E]:E;U+=k(v[T][le],E)}T<v.length-1&&(!Q||0<$&&!H)&&(U+=D)}}return U}function k(M,v){var Q,U;return M==null?"":M.constructor===Date?JSON.stringify(M).slice(1,25):(U=!1,z&&typeof M=="string"&&z.test(M)&&(M="'"+M,U=!0),Q=M.toString().replace(j,ae),(U=U||c===!0||typeof c=="function"&&c(M,v)||Array.isArray(c)&&c[v]||((V,ie)=>{for(var O=0;O<ie.length;O++)if(-1<V.indexOf(ie[O]))return!0;return!1})(Q,l.BAD_DELIMITERS)||-1<Q.indexOf(y)||Q.charAt(0)===" "||Q.charAt(Q.length-1)===" ")?G+Q+G:Q)}},l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!u&&!!a.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=B,l.ParserHandle=p,l.NetworkStreamer=d,l.FileStreamer=w,l.StringStreamer=x,l.ReadableStreamStreamer=P,a.jQuery&&((n=a.jQuery).fn.parse=function(i){var o=i.config||{},c=[];return this.each(function(D){if(!(n(this).prop("tagName").toUpperCase()==="INPUT"&&n(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var G=0;G<this.files.length;G++)c.push({file:this.files[G],inputElem:this,instanceConfig:n.extend({},o)})}),b(),this;function b(){if(c.length===0)R(i.complete)&&i.complete();else{var D,G,ae,ne,C=c[0];if(R(i.before)){var z=i.before(C.file,C.inputElem);if(typeof z=="object"){if(z.action==="abort")return D="AbortError",G=C.file,ae=C.inputElem,ne=z.reason,void(R(i.error)&&i.error({name:D},G,ae,ne));if(z.action==="skip")return void y();typeof z.config=="object"&&(C.instanceConfig=n.extend(C.instanceConfig,z.config))}else if(z==="skip")return void y()}var j=C.instanceConfig.complete;C.instanceConfig.complete=function(Z){R(j)&&j(Z,C.file,C.inputElem),y()},l.parse(C.file,C.instanceConfig)}}function y(){c.splice(0,1),b()}}),m&&(a.onmessage=function(i){i=i.data,l.WORKER_ID===void 0&&i&&(l.WORKER_ID=i.workerId),typeof i.input=="string"?a.postMessage({workerId:l.WORKER_ID,results:l.parse(i.input,i.config),finished:!0}):(a.File&&i.input instanceof File||i.input instanceof Object)&&(i=l.parse(i.input,i.config))&&a.postMessage({workerId:l.WORKER_ID,results:i,finished:!0})}),(d.prototype=Object.create(f.prototype)).constructor=d,(w.prototype=Object.create(f.prototype)).constructor=w,(x.prototype=Object.create(x.prototype)).constructor=x,(P.prototype=Object.create(f.prototype)).constructor=P,l})})(Me)),Me.exports}var Ht=$t();const Yt=Wt(Ht),qt=({onAddBatch:r})=>{const{userData:t,user:s}=Ne(),{batches:a}=Re(),{t:n,language:u}=ye(),m=p=>{if(!p)return"March 2024";try{const _=new Date(p);return isNaN(_.getTime())?"March 2024":_.toLocaleDateString(u==="bn"?"bn-BD":"en-US",{month:"long",year:"numeric"})}catch{return"March 2024"}},g=a.reduce((p,_)=>{const B=typeof _.weight=="string"?parseFloat(_.weight):_.weight||0;return p+B},0),h=[{id:"first_harvest",name:n("profileSection.badges.firstHarvest.name"),icon:Ie,color:"text-emerald-600 bg-emerald-100",earned:a.length>=1,desc:n("profileSection.badges.firstHarvest.desc")},{id:"scale_farmer",name:n("profileSection.badges.scaleFarmer.name"),icon:qe,color:"text-amber-600 bg-amber-100",earned:g>1e3,desc:n("profileSection.badges.scaleFarmer.desc")},{id:"risk_expert",name:n("profileSection.badges.riskExpert.name"),icon:ze,color:"text-blue-600 bg-blue-100",earned:!0,desc:n("profileSection.badges.riskExpert.desc")}],[l,f]=Ae.useState(null),[d,w]=Ae.useState(!0);Ae.useEffect(()=>{let p=!0;return(async()=>{if(s?.uid)try{const{doc:B,getDoc:q}=await Ge(async()=>{const{doc:se,getDoc:R}=await import("./firebase-BPVtm2U-.js").then(i=>i.A);return{doc:se,getDoc:R}},[]),{db:F}=await Ge(async()=>{const{db:se}=await import("./index-B08RLEBq.js").then(R=>R.f);return{db:se}},__vite__mapDeps([0,1,2,3,4])),Y=B(F,"users",s.uid),re=await q(Y);p&&re.exists()&&f(re.data())}catch(B){console.error("Error fetching profile:",B)}finally{p&&w(!1)}})(),()=>{p=!1}},[s]);const x={name:l?.name||t?.name||s?.displayName||n("dashboard.defaultName"),location:l?.location||t?.location||"Bangladesh",phone:l?.phone||t?.phone||s?.phoneNumber||"N/A",memberSince:m(l?.createdAt||t?.createdAt||s?.metadata?.creationTime),photoURL:l?.photoURL||t?.photoURL||s?.photoURL};u==="bn"&&x.name&&x.name.toLowerCase()==="neel"&&(x.name="à¦¨à§€à¦²");const P=()=>{if(a.length===0){alert(n("profileSection.export.noData"));return}const p=a.map(Y=>({"Batch ID":Y.id,"Crop Type":Y.cropType,"Weight (kg)":Y.weight,"Harvest Date":Y.harvestDate,Division:Y.division||"N/A","Storage Type":Y.storageType||"N/A","Created At":new Date(Y.createdAt).toLocaleDateString()})),_=Yt.unparse(p),B=new Blob([_],{type:"text/csv;charset=utf-8;"}),q=document.createElement("a"),F=URL.createObjectURL(B);q.setAttribute("href",F),q.setAttribute("download","harvest_report.csv"),q.style.visibility="hidden",document.body.appendChild(q),q.click(),document.body.removeChild(q)};return e.jsxs("div",{className:"space-y-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col md:flex-row items-center gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden border-4 border-farm-lime/20 shadow-lg",children:x.photoURL?e.jsx("img",{src:x.photoURL,alt:x.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center text-gray-400 text-3xl font-bold",children:x.name.charAt(0)})}),e.jsx("div",{className:"absolute bottom-1 right-1 bg-emerald-500 text-white p-1 rounded-full border-2 border-white",children:e.jsx(Oe,{size:14})})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:x.name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 text-gray-500 text-sm mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($e,{size:14}),x.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xt,{size:14}),x.phone]})]}),e.jsxs("div",{className:"mt-3 flex gap-2 justify-center md:justify-start",children:[e.jsx("button",{className:"px-4 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-bold rounded-lg transition-colors",children:n("profileSection.editProfile")}),e.jsxs("button",{onClick:P,className:"px-4 py-1.5 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 text-xs font-bold rounded-lg transition-colors flex items-center gap-1",children:[e.jsx(pt,{size:14})," ",n("profileSection.exportReport")]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"text-center px-6 py-2 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase",children:n("profileSection.totalSaved")}),e.jsxs("div",{className:"text-xl font-bold text-emerald-600",children:[g," kg"]})]}),e.jsxs("div",{className:"text-center px-6 py-2 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase",children:n("profileSection.batches")}),e.jsx("div",{className:"text-xl font-bold text-gray-900",children:a.length})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"md:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ie,{size:20,className:"text-emerald-600"}),n("profileSection.yourHarvests")]}),e.jsx("button",{onClick:r,className:"text-sm font-bold text-emerald-600 hover:text-emerald-700",children:n("profileSection.addNew")})]}),e.jsxs("div",{className:"space-y-3",children:[a.length===0?e.jsx("div",{className:"text-center py-8 text-gray-400 text-sm",children:n("profileSection.noHarvests")}):a.slice(0,3).map((p,_)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:e.jsx(lt,{size:18,className:"text-emerald-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-bold text-gray-800",children:n(`batchData.crops.${p.cropType}`)!==`batchData.crops.${p.cropType}`?n(`batchData.crops.${p.cropType}`):p.cropType}),p.status==="Completed"&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-bold bg-green-100 text-green-700 border border-green-200",children:"âœ“"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(p.harvestDate).toLocaleDateString(u==="bn"?"bn-BD":"en-US")," â€¢ ",n(`batchData.divisions.${p.division}`)!==`batchData.divisions.${p.division}`?n(`batchData.divisions.${p.division}`):p.division]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900",children:[p.weight," ",u==="bn"?"à¦•à§‡à¦œà¦¿":"kg"]}),e.jsx("div",{className:"text-xs text-gray-500",children:n(`batchData.storage.${p.storageType}`)!==`batchData.storage.${p.storageType}`?n(`batchData.storage.${p.storageType}`):p.storageType})]})]},_)),a.length>3&&e.jsxs("button",{className:"w-full py-2 text-xs font-bold text-gray-500 hover:text-gray-700",children:[n("profileSection.viewAll")," (",a.length,")"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(qe,{size:20,className:"text-amber-500"}),n("profileSection.achievements")]}),e.jsx("div",{className:"space-y-3",children:h.map(p=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl border ${p.earned?"bg-white border-gray-100":"bg-gray-50 border-transparent opacity-60"}`,children:[e.jsx("div",{className:`p-2 rounded-full ${p.earned?p.color:"bg-gray-200 text-gray-400"}`,children:e.jsx(p.icon,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-gray-900",children:p.name}),e.jsx("div",{className:"text-xs text-gray-500",children:p.desc})]}),p.earned&&e.jsx(Oe,{size:16,className:"ml-auto text-emerald-500"})]},p.id))})]})]})]})},Ut=()=>{const{batches:r}=Re(),{t}=ye(),s=r.reduce((h,l)=>{const f=l.storageType||l.storage||"Other";return h[f]=(h[f]||0)+1,h},{}),a=Object.keys(s).map(h=>({name:h,value:s[h]})),n=a.length>0?a:[{name:t("analytics.storageDistribution.noData"),value:1}],u=["#059669","#10B981","#34D399","#6EE7B7"],m=r.filter(h=>h.harvestDate&&h.weight!==void 0&&h.weight!==null).map(h=>{const l=typeof h.weight=="string"?parseFloat(h.weight):h.weight||0,d=new Date(h.harvestDate).toLocaleDateString("en-US",{month:"short"});return{name:t(`analytics.months.${d}`)||d,yield:l}}).slice(0,6),g=m.length>0?m:[{name:t("analytics.months.Jan"),yield:0},{name:t("analytics.months.Feb"),yield:0},{name:t("analytics.months.Mar"),yield:0},{name:t("analytics.months.Apr"),yield:0},{name:t("analytics.months.May"),yield:0},{name:t("analytics.months.Jun"),yield:0}];return e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:t("analytics.harvestTrends.title")}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-2 py-1 rounded-lg",children:[e.jsx(yt,{size:16}),e.jsx("span",{children:t("analytics.harvestTrends.growth")})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(Ue,{width:"100%",height:"100%",children:e.jsxs(bt,{data:g,children:[e.jsx(vt,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),e.jsx(wt,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#6B7280",fontSize:12},dy:10}),e.jsx(jt,{axisLine:!1,tickLine:!1,tick:{fill:"#6B7280",fontSize:12}}),e.jsx(Xe,{contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},cursor:{stroke:"#10B981",strokeWidth:2}}),e.jsx(Nt,{type:"monotone",dataKey:"yield",stroke:"#059669",strokeWidth:3,dot:{fill:"#059669",strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:6,strokeWidth:0}})]})})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-6",children:t("analytics.storageDistribution.title")}),e.jsxs("div",{className:"h-64 relative",children:[e.jsx(Ue,{width:"100%",height:"100%",children:e.jsxs(kt,{children:[e.jsx(St,{data:n,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",children:n.map((h,l)=>e.jsx(_t,{fill:u[l%u.length]},`cell-${l}`))}),e.jsx(Xe,{})]})}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900",children:r.length}),e.jsx("span",{className:"text-xs text-gray-500 uppercase tracking-wider",children:t("analytics.storageDistribution.batches")})]})]}),e.jsx("div",{className:"flex justify-center gap-4 mt-4",children:n.slice(0,3).map((h,l)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:u[l%u.length]}}),h.name]},l))})]}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-900 to-emerald-800 p-6 rounded-2xl shadow-lg text-white flex flex-col justify-between relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-3xl -mr-16 -mt-16"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-emerald-500/20 rounded-full blur-2xl -ml-12 -mb-12"}),(()=>{const h=r.reduce((p,_)=>{const B=parseFloat(_.weight)||0;return p+50+Math.floor(B/10)},0);let l=1,f=0,d=200,w=2;h>=500?(l=3,f=500,d=1e3,w=4):h>=200&&(l=2,f=200,d=500,w=3);const x=Math.min(100,Math.max(0,(h-f)/(d-f)*100)),P=d-h;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:e.jsx(Dt,{size:24,className:"text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg",children:["Level ",l," Farmer"]}),e.jsxs("p",{className:"text-emerald-200 text-sm",children:[P," points to Level ",w]})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsx("span",{children:t("analytics.gamification.progress")}),e.jsxs("span",{children:[Math.round(x),"%"]})]}),e.jsx("div",{className:"h-2 bg-black/20 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-yellow-400 rounded-full shadow-[0_0_10px_rgba(250,204,21,0.5)] transition-all duration-1000 ease-out",style:{width:`${x}%`}})})]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-4 border border-white/10",children:[e.jsx("h4",{className:"font-bold text-sm mb-2",children:t("analytics.gamification.nextAchievement")}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-white/20 flex items-center justify-center text-xl",children:l===1?"ðŸŒ±":l===2?"ðŸŒ¾":"ðŸšœ"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:l===1?t("analytics.gamification.masterHarvester"):l===2?"Expert Cultivator":"Master Agronomist"}),e.jsx("p",{className:"text-xs text-emerald-200",children:l===1?t("analytics.gamification.nextGoal"):l===2?"Harvest 500kg total":"Maintain 95% crop health"})]})]})]})]})})()]})]})},et=({cropType:r,currentRisk:t,weatherData:s,humidity:a})=>{const n=r?.toLowerCase()||"",u=t?.toUpperCase()||"LOW",m=s?.current?.temp||s?.temp||25,h=(s?.forecast||[])[0]?.weather?.toLowerCase()||"",l=h.includes("rain")||h.includes("drizzle");let f="";return l&&a>80&&(n.includes("potato")||n.includes("onion")||n.includes("alu")||n.includes("peyaj"))?f="à¦†à¦—à¦¾à¦®à§€à¦•à¦¾à¦² à¦¬à§ƒà¦·à§à¦Ÿà¦¿ à¦¹à¦¬à§‡ à¦à¦¬à¦‚ à¦†à¦ªà¦¨à¦¾à¦° à¦†à¦²à§à¦° à¦—à§à¦¦à¦¾à¦®à§‡ à¦†à¦°à§à¦¦à§à¦°à¦¤à¦¾ à¦¬à§‡à¦¶à¦¿à¥¤ à¦à¦–à¦¨à¦‡ à¦«à§à¦¯à¦¾à¦¨ à¦šà¦¾à¦²à§ à¦•à¦°à§à¦¨à¥¤":l&&(u==="HIGH"||u==="CRITICAL")?f=`à¦†à¦—à¦¾à¦®à§€à¦•à¦¾à¦² à¦¬à§ƒà¦·à§à¦Ÿà¦¿ à¦¹à¦¤à§‡ à¦ªà¦¾à¦°à§‡à¥¤ à¦†à¦ªà¦¨à¦¾à¦° ${r||"à¦«à¦¸à¦²"} à¦¶à§à¦•à¦¾à¦¤à§‡ à¦¦à§‡à¦¬à§‡à¦¨ à¦¨à¦¾à¥¤ à¦¦à§à¦°à§à¦¤ à¦¨à¦¿à¦°à¦¾à¦ªà¦¦ à¦¸à§à¦¥à¦¾à¦¨à§‡ à¦¸à¦°à¦¿à§Ÿà§‡ à¦¨à¦¿à¦¨à¥¤`:a>80&&(n.includes("potato")||n.includes("onion")||n.includes("alu")||n.includes("peyaj"))?f="à¦¬à¦¾à¦¤à¦¾à¦¸à§‡ à¦†à¦°à§à¦¦à§à¦°à¦¤à¦¾ à¦…à¦¨à§‡à¦• à¦¬à§‡à¦¶à¦¿à¥¤ à¦ªà¦šà¦¨ à¦°à§‹à¦§ à¦•à¦°à¦¤à§‡ à¦—à§à¦¦à¦¾à¦®à§‡ à¦«à§à¦¯à¦¾à¦¨ à¦šà¦¾à¦²à§ à¦•à¦°à§à¦¨ à¦¬à¦¾ à¦¬à¦¾à§Ÿà§ à¦šà¦²à¦¾à¦šà¦²à§‡à¦° à¦¬à§à¦¯à¦¬à¦¸à§à¦¥à¦¾ à¦•à¦°à§à¦¨à¥¤":m>35?f="à¦ªà§à¦°à¦šà¦£à§à¦¡ à¦¤à¦¾à¦ªà¦ªà§à¦°à¦¬à¦¾à¦¹ à¦šà¦²à¦›à§‡à¥¤ à¦«à¦¸à¦²à§‡ à¦…à¦¤à¦¿à¦°à¦¿à¦•à§à¦¤ à¦¸à§‡à¦š à¦¦à¦¿à¦¨ à¦à¦¬à¦‚ à¦›à¦¾à§Ÿà¦¾à¦° à¦¬à§à¦¯à¦¬à¦¸à§à¦¥à¦¾ à¦•à¦°à§à¦¨à¥¤":f="à¦†à¦¬à¦¹à¦¾à¦“à§Ÿà¦¾ à¦…à¦¨à§à¦•à§‚à¦² à¦†à¦›à§‡à¥¤ à¦¨à¦¿à§Ÿà¦®à¦¿à¦¤ à¦ªà¦°à§à¦¯à¦¬à§‡à¦•à§à¦·à¦£ à¦šà¦¾à¦²à¦¿à§Ÿà§‡ à¦¯à¦¾à¦¨à¥¤",f!=="à¦†à¦¬à¦¹à¦¾à¦“à§Ÿà¦¾ à¦…à¦¨à§à¦•à§‚à¦² à¦†à¦›à§‡à¥¤ à¦¨à¦¿à§Ÿà¦®à¦¿à¦¤ à¦ªà¦°à§à¦¯à¦¬à§‡à¦•à§à¦·à¦£ à¦šà¦¾à¦²à¦¿à§Ÿà§‡ à¦¯à¦¾à¦¨à¥¤"&&(console.log("%c[SMS GATEWAY] Sending to 017XXXXXXXX...","color: yellow; font-weight: bold; background: #333; padding: 4px;"),console.log(`%cMESSAGE: "${f}"`,"color: lime; font-weight: bold;")),f},Xt=({isOpen:r,onClose:t,message:s})=>r?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-start justify-center pt-10",children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 transition-opacity",onClick:t}),e.jsxs("div",{className:"bg-[#2B2B2B] text-white rounded-xl shadow-2xl w-[400px] max-w-[90vw] overflow-hidden transform transition-all animate-in fade-in zoom-in-95 duration-200 relative z-50 border border-gray-700",children:[e.jsx("div",{className:"px-6 pt-6 pb-2",children:e.jsx("h3",{className:"text-lg font-medium text-white",children:"farmix-59170.web.app says"})}),e.jsx("div",{className:"px-6 py-4",children:e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:s})}),e.jsx("div",{className:"px-6 pb-6 flex justify-end",children:e.jsx("button",{onClick:t,className:"bg-[#3B82F6] hover:bg-[#2563EB] text-white px-6 py-2 rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-[#2B2B2B]",children:"OK"})})]})]}):null,ht=6048e5,Gt=864e5,tt=Symbol.for("constructDateFrom");function fe(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&tt in r?r[tt](t):r instanceof Date?new r.constructor(t):new Date(t)}function oe(r,t){return fe(t||r,r)}function Qt(r,t,s){const a=oe(r,s?.in);return isNaN(t)?fe(r,NaN):(t&&a.setDate(a.getDate()+t),a)}let Jt={};function Le(){return Jt}function Ce(r,t){const s=Le(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,n=oe(r,t?.in),u=n.getDay(),m=(u<a?7:0)+u-a;return n.setDate(n.getDate()-m),n.setHours(0,0,0,0),n}function Te(r,t){return Ce(r,{...t,weekStartsOn:1})}function ft(r,t){const s=oe(r,t?.in),a=s.getFullYear(),n=fe(s,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const u=Te(n),m=fe(s,0);m.setFullYear(a,0,4),m.setHours(0,0,0,0);const g=Te(m);return s.getTime()>=u.getTime()?a+1:s.getTime()>=g.getTime()?a:a-1}function rt(r){const t=oe(r),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+r-+s}function Kt(r,...t){const s=fe.bind(null,t.find(a=>typeof a=="object"));return t.map(s)}function st(r,t){const s=oe(r,t?.in);return s.setHours(0,0,0,0),s}function Vt(r,t,s){const[a,n]=Kt(s?.in,r,t),u=st(a),m=st(n),g=+u-rt(u),h=+m-rt(m);return Math.round((g-h)/Gt)}function Zt(r,t){const s=ft(r,t),a=fe(r,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),Te(a)}function er(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function tr(r){return!(!er(r)&&typeof r!="number"||isNaN(+oe(r)))}function rr(r,t){const s=oe(r,t?.in);return s.setFullYear(s.getFullYear(),0,1),s.setHours(0,0,0,0),s}const sr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ar=(r,t,s)=>{let a;const n=sr[r];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+a:a+" ago":a};function Be(r){return(t={})=>{const s=t.width?String(t.width):r.defaultWidth;return r.formats[s]||r.formats[r.defaultWidth]}}const nr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ir={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},or={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lr={date:Be({formats:nr,defaultWidth:"full"}),time:Be({formats:ir,defaultWidth:"full"}),dateTime:Be({formats:or,defaultWidth:"full"})},cr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},dr=(r,t,s,a)=>cr[r];function _e(r){return(t,s)=>{const a=s?.context?String(s.context):"standalone";let n;if(a==="formatting"&&r.formattingValues){const m=r.defaultFormattingWidth||r.defaultWidth,g=s?.width?String(s.width):m;n=r.formattingValues[g]||r.formattingValues[m]}else{const m=r.defaultWidth,g=s?.width?String(s.width):r.defaultWidth;n=r.values[g]||r.values[m]}const u=r.argumentCallback?r.argumentCallback(t):t;return n[u]}}const ur={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},hr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},mr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pr=(r,t)=>{const s=Number(r),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},yr={ordinalNumber:pr,era:_e({values:ur,defaultWidth:"wide"}),quarter:_e({values:hr,defaultWidth:"wide",argumentCallback:r=>r-1}),month:_e({values:fr,defaultWidth:"wide"}),day:_e({values:mr,defaultWidth:"wide"}),dayPeriod:_e({values:gr,defaultWidth:"wide",formattingValues:xr,defaultFormattingWidth:"wide"})};function De(r){return(t,s={})=>{const a=s.width,n=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],u=t.match(n);if(!u)return null;const m=u[0],g=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],h=Array.isArray(g)?vr(g,d=>d.test(m)):br(g,d=>d.test(m));let l;l=r.valueCallback?r.valueCallback(h):h,l=s.valueCallback?s.valueCallback(l):l;const f=t.slice(m.length);return{value:l,rest:f}}}function br(r,t){for(const s in r)if(Object.prototype.hasOwnProperty.call(r,s)&&t(r[s]))return s}function vr(r,t){for(let s=0;s<r.length;s++)if(t(r[s]))return s}function wr(r){return(t,s={})=>{const a=t.match(r.matchPattern);if(!a)return null;const n=a[0],u=t.match(r.parsePattern);if(!u)return null;let m=r.valueCallback?r.valueCallback(u[0]):u[0];m=s.valueCallback?s.valueCallback(m):m;const g=t.slice(n.length);return{value:m,rest:g}}}const jr=/^(\d+)(th|st|nd|rd)?/i,Nr=/\d+/i,kr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sr={any:[/^b/i,/^(a|c)/i]},_r={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dr={any:[/1/i,/2/i,/3/i,/4/i]},Cr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Or={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Er={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Pr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Rr={ordinalNumber:wr({matchPattern:jr,parsePattern:Nr,valueCallback:r=>parseInt(r,10)}),era:De({matchPatterns:kr,defaultMatchWidth:"wide",parsePatterns:Sr,defaultParseWidth:"any"}),quarter:De({matchPatterns:_r,defaultMatchWidth:"wide",parsePatterns:Dr,defaultParseWidth:"any",valueCallback:r=>r+1}),month:De({matchPatterns:Cr,defaultMatchWidth:"wide",parsePatterns:Mr,defaultParseWidth:"any"}),day:De({matchPatterns:Or,defaultMatchWidth:"wide",parsePatterns:Er,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:Pr,defaultMatchWidth:"any",parsePatterns:Tr,defaultParseWidth:"any"})},Lr={code:"en-US",formatDistance:ar,formatLong:lr,formatRelative:dr,localize:yr,match:Rr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Wr(r,t){const s=oe(r,t?.in);return Vt(s,rr(s))+1}function Ar(r,t){const s=oe(r,t?.in),a=+Te(s)-+Zt(s);return Math.round(a/ht)+1}function mt(r,t){const s=oe(r,t?.in),a=s.getFullYear(),n=Le(),u=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,m=fe(t?.in||r,0);m.setFullYear(a+1,0,u),m.setHours(0,0,0,0);const g=Ce(m,t),h=fe(t?.in||r,0);h.setFullYear(a,0,u),h.setHours(0,0,0,0);const l=Ce(h,t);return+s>=+g?a+1:+s>=+l?a:a-1}function Br(r,t){const s=Le(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,n=mt(r,t),u=fe(t?.in||r,0);return u.setFullYear(n,0,a),u.setHours(0,0,0,0),Ce(u,t)}function Fr(r,t){const s=oe(r,t?.in),a=+Ce(s,t)-+Br(s,t);return Math.round(a/ht)+1}function L(r,t){const s=r<0?"-":"",a=Math.abs(r).toString().padStart(t,"0");return s+a}const ge={y(r,t){const s=r.getFullYear(),a=s>0?s:1-s;return L(t==="yy"?a%100:a,t.length)},M(r,t){const s=r.getMonth();return t==="M"?String(s+1):L(s+1,2)},d(r,t){return L(r.getDate(),t.length)},a(r,t){const s=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(r,t){return L(r.getHours()%12||12,t.length)},H(r,t){return L(r.getHours(),t.length)},m(r,t){return L(r.getMinutes(),t.length)},s(r,t){return L(r.getSeconds(),t.length)},S(r,t){const s=t.length,a=r.getMilliseconds(),n=Math.trunc(a*Math.pow(10,s-3));return L(n,t.length)}},we={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},at={G:function(r,t,s){const a=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});case"GGGG":default:return s.era(a,{width:"wide"})}},y:function(r,t,s){if(t==="yo"){const a=r.getFullYear(),n=a>0?a:1-a;return s.ordinalNumber(n,{unit:"year"})}return ge.y(r,t)},Y:function(r,t,s,a){const n=mt(r,a),u=n>0?n:1-n;if(t==="YY"){const m=u%100;return L(m,2)}return t==="Yo"?s.ordinalNumber(u,{unit:"year"}):L(u,t.length)},R:function(r,t){const s=ft(r);return L(s,t.length)},u:function(r,t){const s=r.getFullYear();return L(s,t.length)},Q:function(r,t,s){const a=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return L(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,t,s){const a=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return L(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,t,s){const a=r.getMonth();switch(t){case"M":case"MM":return ge.M(r,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(r,t,s){const a=r.getMonth();switch(t){case"L":return String(a+1);case"LL":return L(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(r,t,s,a){const n=Fr(r,a);return t==="wo"?s.ordinalNumber(n,{unit:"week"}):L(n,t.length)},I:function(r,t,s){const a=Ar(r);return t==="Io"?s.ordinalNumber(a,{unit:"week"}):L(a,t.length)},d:function(r,t,s){return t==="do"?s.ordinalNumber(r.getDate(),{unit:"date"}):ge.d(r,t)},D:function(r,t,s){const a=Wr(r);return t==="Do"?s.ordinalNumber(a,{unit:"dayOfYear"}):L(a,t.length)},E:function(r,t,s){const a=r.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});case"EEEE":default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(r,t,s,a){const n=r.getDay(),u=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(u);case"ee":return L(u,2);case"eo":return s.ordinalNumber(u,{unit:"day"});case"eee":return s.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(n,{width:"short",context:"formatting"});case"eeee":default:return s.day(n,{width:"wide",context:"formatting"})}},c:function(r,t,s,a){const n=r.getDay(),u=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(u);case"cc":return L(u,t.length);case"co":return s.ordinalNumber(u,{unit:"day"});case"ccc":return s.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(n,{width:"narrow",context:"standalone"});case"cccccc":return s.day(n,{width:"short",context:"standalone"});case"cccc":default:return s.day(n,{width:"wide",context:"standalone"})}},i:function(r,t,s){const a=r.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return L(n,t.length);case"io":return s.ordinalNumber(n,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});case"iiii":default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(r,t,s){const n=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,t,s){const a=r.getHours();let n;switch(a===12?n=we.noon:a===0?n=we.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,t,s){const a=r.getHours();let n;switch(a>=17?n=we.evening:a>=12?n=we.afternoon:a>=4?n=we.morning:n=we.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,t,s){if(t==="ho"){let a=r.getHours()%12;return a===0&&(a=12),s.ordinalNumber(a,{unit:"hour"})}return ge.h(r,t)},H:function(r,t,s){return t==="Ho"?s.ordinalNumber(r.getHours(),{unit:"hour"}):ge.H(r,t)},K:function(r,t,s){const a=r.getHours()%12;return t==="Ko"?s.ordinalNumber(a,{unit:"hour"}):L(a,t.length)},k:function(r,t,s){let a=r.getHours();return a===0&&(a=24),t==="ko"?s.ordinalNumber(a,{unit:"hour"}):L(a,t.length)},m:function(r,t,s){return t==="mo"?s.ordinalNumber(r.getMinutes(),{unit:"minute"}):ge.m(r,t)},s:function(r,t,s){return t==="so"?s.ordinalNumber(r.getSeconds(),{unit:"second"}):ge.s(r,t)},S:function(r,t){return ge.S(r,t)},X:function(r,t,s){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return it(a);case"XXXX":case"XX":return pe(a);case"XXXXX":case"XXX":default:return pe(a,":")}},x:function(r,t,s){const a=r.getTimezoneOffset();switch(t){case"x":return it(a);case"xxxx":case"xx":return pe(a);case"xxxxx":case"xxx":default:return pe(a,":")}},O:function(r,t,s){const a=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+nt(a,":");case"OOOO":default:return"GMT"+pe(a,":")}},z:function(r,t,s){const a=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+nt(a,":");case"zzzz":default:return"GMT"+pe(a,":")}},t:function(r,t,s){const a=Math.trunc(+r/1e3);return L(a,t.length)},T:function(r,t,s){return L(+r,t.length)}};function nt(r,t=""){const s=r>0?"-":"+",a=Math.abs(r),n=Math.trunc(a/60),u=a%60;return u===0?s+String(n):s+String(n)+t+L(u,2)}function it(r,t){return r%60===0?(r>0?"-":"+")+L(Math.abs(r)/60,2):pe(r,t)}function pe(r,t=""){const s=r>0?"-":"+",a=Math.abs(r),n=L(Math.trunc(a/60),2),u=L(a%60,2);return s+n+t+u}const ot=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},gt=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ir=(r,t)=>{const s=r.match(/(P+)(p+)?/)||[],a=s[1],n=s[2];if(!n)return ot(r,t);let u;switch(a){case"P":u=t.dateTime({width:"short"});break;case"PP":u=t.dateTime({width:"medium"});break;case"PPP":u=t.dateTime({width:"long"});break;case"PPPP":default:u=t.dateTime({width:"full"});break}return u.replace("{{date}}",ot(a,t)).replace("{{time}}",gt(n,t))},zr={p:gt,P:Ir},$r=/^D+$/,Hr=/^Y+$/,Yr=["D","DD","YY","YYYY"];function qr(r){return $r.test(r)}function Ur(r){return Hr.test(r)}function Xr(r,t,s){const a=Gr(r,t,s);if(console.warn(a),Yr.includes(r))throw new RangeError(a)}function Gr(r,t,s){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kr=/^'([^]*?)'?$/,Vr=/''/g,Zr=/[a-zA-Z]/;function es(r,t,s){const a=Le(),n=a.locale??Lr,u=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,m=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,g=oe(r,s?.in);if(!tr(g))throw new RangeError("Invalid time value");let h=t.match(Jr).map(f=>{const d=f[0];if(d==="p"||d==="P"){const w=zr[d];return w(f,n.formatLong)}return f}).join("").match(Qr).map(f=>{if(f==="''")return{isToken:!1,value:"'"};const d=f[0];if(d==="'")return{isToken:!1,value:ts(f)};if(at[d])return{isToken:!0,value:f};if(d.match(Zr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:f}});n.localize.preprocessor&&(h=n.localize.preprocessor(g,h));const l={firstWeekContainsDate:u,weekStartsOn:m,locale:n};return h.map(f=>{if(!f.isToken)return f.value;const d=f.value;(Ur(d)||qr(d))&&Xr(d,t,String(r));const w=at[d[0]];return w(g,d,n.localize,l)}).join("")}function ts(r){const t=r.match(Kr);return t?t[1].replace(Vr,"'"):r}const rs=r=>{const t=new Date,s=[],a=Math.floor(Math.random()*3);for(let n=0;n<7;n++){const u=Qt(t,n),m=es(u,"yyyy-MM-dd");let g=n===a;n>2&&(g=Math.random()>.7);const h=Math.floor(Math.random()*9)+28,l=Math.floor(Math.random()*36)+60;let f=Math.floor(Math.random()*101),d="Sunny";g?(f=Math.floor(Math.random()*40)+61,d="Rain"):(f=Math.floor(Math.random()*60),d=f>30?"Cloudy":"Sunny"),s.push({date:m,temp:h,humidity:l,rainProb:f,condition:d})}return s},ss=(r,t)=>{let s=120;r.cropType;const a=parseFloat(r.moistureContent||0),n=14;if(a>n){const w=a-n,x=Math.ceil(w)*5;s-=x}(t[0]?.temp||30)>30&&(s-=10);let m=null;const g=s/24,h=Math.min(3,Math.ceil(g));for(let w=0;w<h;w++)if(t[w].rainProb>50){s=s*.5,m="Rain Blocking Drying";break}let l="Low",f="green",d=`Stable. Moisture is ${a}%. Weather is favorable.`;return s<24?(l="Critical",f="red"):s<48?(l="High",f="orange"):s<72&&(l="Medium",f="yellow"),l==="Critical"||l==="High"?m==="Rain Blocking Drying"?d=`${l} Risk of Spoilage (ETCL: ${Math.round(s)} hours). Rain is predicted, making sun-drying impossible. Use indoor aeration immediately.`:a>n?d=`${l} Risk (ETCL: ${Math.round(s)} hours). Moisture is critically high (${a}%). Immediate drying required.`:d=`${l} Risk (ETCL: ${Math.round(s)} hours). Conditions are degrading rapidly.`:m==="Rain Blocking Drying"?(d=`Caution. Rain predicted. Sun-drying may be difficult. (ETCL: ${Math.round(s)} hours)`,f="yellow"):d=`Stable. Moisture is ${a}%. Weather looks good for now.`,{etclHours:Math.round(s),riskLevel:l,color:f,message:d,forecast:t.slice(0,3)}},as=({batch:r})=>{const[t,s]=X.useState(null),[a,n]=X.useState(!0);if(X.useEffect(()=>{if(!r)return;n(!0),r.location;const x=rs(),P=ss(r,x);s(P),n(!1)},[r]),a)return e.jsx("div",{className:"animate-pulse h-48 bg-gray-100 rounded-xl"});if(!t)return null;const{etclHours:u,riskLevel:m,color:g,message:h,forecast:l}=t,f={green:"bg-green-500 text-green-700 border-green-200 bg-green-50",yellow:"bg-yellow-500 text-yellow-700 border-yellow-200 bg-yellow-50",orange:"bg-orange-500 text-orange-700 border-orange-200 bg-orange-50",red:"bg-red-500 text-red-700 border-red-200 bg-red-50"},d={green:"bg-green-500",yellow:"bg-yellow-400",orange:"bg-orange-500",red:"bg-red-600"};let w="25%";return m==="Medium"&&(w="50%"),m==="High"&&(w="75%"),m==="Critical"&&(w="100%"),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-5 font-inter",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ”®"})," Prediction Engine"]}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase ${f[g].split(" ")[1]} ${f[g].split(" ")[3]}`,children:[m," Risk"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Safe"}),e.jsx("span",{children:"Critical"})]}),e.jsx("div",{className:"h-3 w-full bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all duration-1000 ease-out ${d[g]}`,style:{width:w}})}),e.jsxs("p",{className:"text-right text-xs font-bold mt-1 text-gray-600",children:["ETCL: ",u," Hours"]})]}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:l.map((x,P)=>e.jsxs("div",{className:"flex-1 min-w-[80px] bg-gray-50 rounded-lg p-2 flex flex-col items-center text-center border border-gray-100",children:[e.jsx("span",{className:"text-[10px] text-gray-500 font-medium mb-1",children:P===0?"Today":P===1?"Tmrrw":`Day ${P+1}`}),x.condition==="Rain"?e.jsx(je,{size:20,className:"text-blue-500 mb-1"}):x.condition==="Cloudy"?e.jsx(Ee,{size:20,className:"text-gray-400 mb-1"}):e.jsx(Pe,{size:20,className:"text-orange-400 mb-1"}),e.jsxs("span",{className:"text-xs font-bold text-gray-700",children:[x.temp,"Â°C"]}),e.jsxs("span",{className:"text-[10px] text-gray-400",children:[x.rainProb,"% Rain"]})]},P))}),e.jsx("div",{className:`p-4 rounded-lg border ${f[g].split(" ")[2]} ${f[g].split(" ")[3]}`,children:e.jsxs("div",{className:"flex gap-3",children:[m==="Critical"||m==="High"?e.jsx(xe,{className:`shrink-0 ${f[g].split(" ")[1]}`,size:20}):e.jsx(Oe,{className:`shrink-0 ${f[g].split(" ")[1]}`,size:20}),e.jsx("p",{className:`text-sm font-medium ${f[g].split(" ")[1]}`,children:h})]})})]})},Fe=r=>{if(r==null)return"";const t=["à§¦","à§§","à§¨","à§©","à§ª","à§«","à§¬","à§­","à§®","à§¯"];return r.toString().replace(/\d/g,s=>t[s])},ns=r=>({Clear:"à¦°à§Œà¦¦à§à¦°à§‹à¦œà§à¦œà§à¦¬à¦²",Sunny:"à¦°à§Œà¦¦à§à¦°à§‹à¦œà§à¦œà§à¦¬à¦²",Clouds:"à¦®à§‡à¦˜à¦²à¦¾",Cloudy:"à¦®à§‡à¦˜à¦²à¦¾",Rain:"à¦¬à§ƒà¦·à§à¦Ÿà¦¿",Thunderstorm:"à¦à§œ-à¦¬à§ƒà¦·à§à¦Ÿà¦¿",Drizzle:"à¦—à§à§œà¦¿ à¦—à§à§œà¦¿ à¦¬à§ƒà¦·à§à¦Ÿà¦¿",Fog:"à¦•à§à§Ÿà¦¾à¦¶à¦¾"})[r]||r,is=r=>{const t=new Date(r);return["à¦°à¦¬à¦¿","à¦¸à§‹à¦®","à¦®à¦™à§à¦—à¦²","à¦¬à§à¦§","à¦¬à§ƒà¦¹à¦ƒ","à¦¶à§à¦•à§à¦°","à¦¶à¦¨à¦¿"][t.getDay()]},os=()=>{const{userData:r}=Ne(),t=r?.location?.split(",")[0]||"Dhaka",{weatherData:s,loading:a,error:n}=ut(t);if(a)return e.jsx("div",{className:"p-6 text-center",children:"à¦²à§‹à¦¡ à¦¹à¦šà§à¦›à§‡..."});if(n)return e.jsx("div",{className:"p-6 text-center text-red-500",children:"à¦¤à¦¥à§à¦¯ à¦ªà¦¾à¦“à§Ÿà¦¾ à¦¯à¦¾à¦šà§à¦›à§‡ à¦¨à¦¾à¥¤ à¦†à¦¬à¦¾à¦° à¦šà§‡à¦·à§à¦Ÿà¦¾ à¦•à¦°à§à¦¨à¥¤"});if(!s)return null;const u=s.forecast[0],m=s.forecast.slice(1,5),h=((f,d)=>d>70?{text:"à¦†à¦—à¦¾à¦®à§€ à§© à¦¦à¦¿à¦¨ à¦¬à§ƒà¦·à§à¦Ÿà¦¿à¦° à¦¸à¦®à§à¦­à¦¾à¦¬à¦¨à¦¾ à§®à§¦% à¦à¦° à¦¬à§‡à¦¶à¦¿ â†’ à¦†à¦œà¦‡ à¦§à¦¾à¦¨ à¦•à¦¾à¦Ÿà§à¦¨ à¦…à¦¥à¦¬à¦¾ à¦¢à§‡à¦•à§‡ à¦°à¦¾à¦–à§à¦¨à¥¤",icon:e.jsx(xe,{className:"text-red-500",size:24}),color:"bg-red-50 border-red-200 text-red-800"}:f>35?{text:"à¦¤à¦¾à¦ªà¦®à¦¾à¦¤à§à¦°à¦¾ à§©à§¬Â°C à¦à¦° à¦‰à¦ªà¦°à§‡ à¦‰à¦ à¦¤à§‡ à¦ªà¦¾à¦°à§‡ â†’ à¦¬à¦¿à¦•à§‡à¦²à§‡à¦° à¦¦à¦¿à¦•à§‡ à¦œà¦®à¦¿à¦¤à§‡ à¦¸à§‡à¦š à¦¦à¦¿à¦¨à¥¤",icon:e.jsx(Ct,{className:"text-orange-500",size:24}),color:"bg-orange-50 border-orange-200 text-orange-800"}:{text:"à¦†à¦¬à¦¹à¦¾à¦“à§Ÿà¦¾ à¦…à¦¨à§à¦•à§‚à¦² à¦†à¦›à§‡à¥¤ à¦¨à¦¿à§Ÿà¦®à¦¿à¦¤ à¦ªà¦°à§à¦¯à¦¬à§‡à¦•à§à¦·à¦£ à¦•à¦°à§à¦¨à¥¤",icon:e.jsx(ze,{className:"text-green-500",size:24}),color:"bg-green-50 border-green-200 text-green-800"})(u.temp,u.rainProb),l=(f,d=24)=>f==="Rain"?e.jsx(je,{size:d,className:"text-blue-500"}):f==="Thunderstorm"?e.jsx(ct,{size:d,className:"text-purple-500"}):f==="Clouds"?e.jsx(Ee,{size:d,className:"text-gray-400"}):e.jsx(Pe,{size:d,className:"text-orange-500"});return e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 font-inter",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"à¦†à¦¬à¦¹à¦¾à¦“à§Ÿà¦¾ à¦ªà§‚à¦°à§à¦¬à¦¾à¦­à¦¾à¦¸"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[t,", à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:[Fe(Math.round(u.temp)),"Â°à¦¸à§‡"]}),e.jsx("p",{className:"text-sm text-gray-500",children:ns(u.weather)})]})]}),e.jsxs("div",{className:"flex flex-col items-center mb-8",children:[e.jsx("div",{className:"mb-4",children:l(u.weather,64)}),e.jsxs("div",{className:`w-full p-4 rounded-xl border flex items-start gap-3 ${h.color}`,children:[e.jsx("div",{className:"shrink-0 mt-1",children:h.icon}),e.jsx("p",{className:"font-medium text-sm md:text-base",children:h.text})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2 md:gap-4",children:m.map((f,d)=>e.jsxs("div",{className:"flex flex-col items-center p-3 bg-gray-50 rounded-xl border border-gray-100 text-center",children:[e.jsx("span",{className:"text-xs font-bold text-gray-600 mb-2",children:is(f.date)}),e.jsx("div",{className:"mb-2",children:l(f.weather,24)}),e.jsxs("span",{className:"text-sm font-bold text-gray-800",children:[Fe(Math.round(f.temp)),"Â°"]}),e.jsx("span",{className:"text-[10px] text-gray-500 mt-1",children:f.rainProb>0?`${Fe(f.rainProb)}% à¦¬à§ƒà¦·à§à¦Ÿà¦¿`:"à¦¶à§à¦·à§à¦•"})]},d))})]})},ls=()=>{const{batches:r,completeBatch:t}=Re(),{userData:s}=Ne(),{t:a}=ye(),[n,u]=X.useState(!1),[m,g]=X.useState(""),[h,l]=X.useState(!1),f=s?.location?.split(",")[0]||"Dhaka",{weatherData:d}=ut(f),w=r.filter(x=>!x.status||x.status==="Active"||x.status==="Processing");return X.useEffect(()=>{if(!d||w.length===0||h)return;let x=!1,P="";w.forEach(p=>{const _=p.cropType||p.crop||"",B=_.trim()==="Demo Potato"||_.includes("Demo Potato"),q={current:{temp:28,humidity:90,weather:"Rain"},forecast:Array(7).fill({date:new Date().toISOString(),temp:28,rainProb:80,humidity:90,weather:"Rain",weatherCode:61})},F=d||(B?q:null),Y=B&&F?{...F,current:{...F.current,humidity:90,temp:28},forecast:[{...F.forecast[0],weather:"Rain",weatherCode:61},...F.forecast.slice(1)]}:F;if(Y){let re=Je(p,Y);B&&(re={...re,riskLevel:"CRITICAL"}),(re.riskLevel==="CRITICAL"||re.riskLevel==="HIGH")&&(x=!0,P=et({cropType:_,currentRisk:re.riskLevel,weatherData:Y,humidity:Y.current?.humidity||0})||`High risk detected for your ${_} batch!`)}}),x&&(g(P),u(!0),l(!0))},[d,w,h]),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 mb-8",children:[e.jsx(Xt,{isOpen:n,onClose:()=>u(!1),message:m}),e.jsx("div",{className:"mb-6",children:e.jsx(os,{})}),w.map(x=>{const P=x.cropType||x.crop||"",p=P.trim()==="Demo Potato"||P.includes("Demo Potato"),_={current:{temp:28,humidity:90,weather:"Rain"},forecast:Array(7).fill({date:new Date().toISOString(),temp:28,rainProb:80,humidity:90,weather:"Rain",weatherCode:61})},B=d||(p?_:null),q=p&&B?{...B,current:{...B.current,humidity:90,temp:28},forecast:[{...B.forecast[0],weather:"Rain",weatherCode:61},...B.forecast.slice(1)]}:B;let F=q?Je(x,q):{riskLevel:"LOADING",etclHours:120,advice:a("activeBatches.loadingWeather"),color:"green",riskFactors:[]};p&&q&&(F={...F,riskLevel:"CRITICAL",color:"red"});const Y=q?et({cropType:P,currentRisk:F.riskLevel,weatherData:q,humidity:q.current?.humidity||0}):null;return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl border border-gray-100 flex flex-col justify-between h-auto min-h-full hover:shadow-md transition-shadow",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 text-lg break-words whitespace-normal",children:x.cropType||x.crop}),e.jsx("p",{className:"text-xs text-gray-500",children:x.variety})]}),e.jsxs("span",{className:"bg-white px-2 py-1 rounded text-xs font-bold border border-gray-200 shadow-sm",children:[x.weight," kg"]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dt,{size:14,className:"text-gray-400"}),e.jsxs("span",{children:[a("activeBatches.harvest"),": ",x.harvestDate]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{size:14,className:"text-gray-400"}),e.jsx("span",{children:x.storageLocation||x.location})]})]}),e.jsx(Ft,{batch:x,riskData:F,weather:q,smartAlert:Y}),e.jsx("div",{className:"mt-4",children:e.jsx(as,{batch:x})}),Y&&e.jsxs("div",{className:`p-3 rounded-lg text-sm font-medium mb-4 flex gap-2 items-start ${F.riskLevel==="CRITICAL"||F.riskLevel==="HIGH"?"bg-red-50 text-red-800 border border-red-100":"bg-blue-50 text-blue-800 border border-blue-100"}`,children:[e.jsx(xe,{size:16,className:"shrink-0 mt-0.5"}),e.jsx("p",{children:Y})]})]}),e.jsxs("div",{className:"mt-auto pt-3 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F.riskLevel==="HIGH"&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-red-600 bg-red-50 px-2 py-1 rounded-full",children:[e.jsx(xe,{size:12})," ",a("activeBatches.risk.high")]}),F.riskLevel==="MEDIUM"&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded-full",children:[e.jsx(xe,{size:12})," ",a("activeBatches.risk.medium")]}),F.riskLevel==="LOW"&&e.jsxs("span",{className:"flex items-center gap-1 text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:[e.jsx(xe,{size:12})," ",a("activeBatches.risk.low")]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:async()=>{if(window.confirm(a("riskPage.confirmComplete")))try{await t(x.id)}catch{alert("Failed to complete batch")}},className:"text-gray-500 text-xs font-bold hover:text-green-600 transition-colors",children:a("riskPage.completeBatch")}),e.jsxs(At,{to:"/risk-analysis",className:"text-emerald-600 text-xs font-bold hover:underline flex items-center gap-1",children:[a("activeBatches.analyze")," ",e.jsx(Mt,{size:12})]})]})]})]},x.id)})]})},cs=()=>{const{batches:r}=Re(),{t}=ye(),s=r.filter(h=>h.status==="Completed"),a=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M7 20h10"}),e.jsx("path",{d:"M10 20c5.5-2.5.8-6.4 3-10"}),e.jsx("path",{d:"M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.2.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"}),e.jsx("path",{d:"M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1.7-1.3 2.9-1.3 3-1.2-1.4 1.9-2.3 3.2-5.4 2.6-1.9-.4-3.2-4-3.2-4z"})]}),n=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),e.jsx("polyline",{points:"17 6 23 6 23 12"})]}),u=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),m=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.77 10-10 10Z"}),e.jsx("path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"})]}),g=[{id:1,name:t("bottomSection.badges.firstHarvest.name"),icon:e.jsx(a,{}),unlocked:!0,description:t("bottomSection.badges.firstHarvest.desc")},{id:2,name:t("bottomSection.badges.highYield.name"),icon:e.jsx(n,{}),unlocked:!0,description:t("bottomSection.badges.highYield.desc")},{id:3,name:t("bottomSection.badges.riskMaster.name"),icon:e.jsx(u,{}),unlocked:!1,description:t("bottomSection.badges.riskMaster.desc")},{id:4,name:t("bottomSection.badges.ecoFarmer.name"),icon:e.jsx(m,{}),unlocked:!1,description:t("bottomSection.badges.ecoFarmer.desc")}];return e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("bottomSection.completedBatches")}),e.jsx("button",{className:"text-emerald-600 font-bold text-sm hover:text-emerald-700",children:t("bottomSection.viewAll")})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:s.length===0?e.jsx("div",{className:"p-8 text-center text-gray-500",children:t("bottomSection.noCompleted")}):e.jsx("div",{className:"divide-y divide-gray-100",children:s.map(h=>e.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors flex items-center justify-between group cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:e.jsx(Oe,{size:20})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-bold text-gray-900",children:[h.crop," - ",h.variety]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h.harvestDate," â€¢ ",h.weight]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx("div",{className:"font-bold text-emerald-600",children:t("bottomSection.completed")}),e.jsx("div",{className:"text-xs text-gray-400",children:t("bottomSection.viewReport")})]}),e.jsx(Ot,{size:20,className:"text-gray-300 group-hover:text-emerald-500 transition-colors"})]})]},h.id))})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("bottomSection.badgesGallery")}),e.jsxs("span",{className:"text-sm text-gray-500",children:["2/12 ",t("bottomSection.unlocked")]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:g.map(h=>e.jsxs("div",{className:`p-4 rounded-2xl border ${h.unlocked?"bg-white border-emerald-100 shadow-sm":"bg-gray-50 border-gray-100 opacity-70"} flex flex-col items-center text-center gap-3 transition-transform hover:scale-105`,children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${h.unlocked?"bg-emerald-100 text-emerald-600":"bg-gray-200 text-gray-400"}`,children:h.unlocked?h.icon:e.jsx(Et,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-bold text-sm ${h.unlocked?"text-gray-900":"text-gray-500"}`,children:h.name}),e.jsx("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:h.description})]})]},h.id))})]})]})},ds=()=>{const{user:r}=Ne(),[t,s]=X.useState(navigator.onLine),[a,n]=X.useState(!1),[u,m]=X.useState(0);X.useEffect(()=>{const d=()=>{s(navigator.onLine)};return window.addEventListener("online",d),window.addEventListener("offline",d),g(),()=>{window.removeEventListener("online",d),window.removeEventListener("offline",d)}},[]),X.useEffect(()=>{t&&u>0&&f()},[t,u]);const g=()=>{const d=localStorage.getItem("unsynced_batches");if(d){const w=JSON.parse(d);m(w.length)}else m(0)},h=async d=>{const w={...d,userId:r?.uid,createdAt:new Date().toISOString(),synced:t};if(t)try{return await Ke(Ve(Qe,"batches"),w),{success:!0,mode:"online"}}catch(x){return console.error("Online save failed, falling back to offline:",x),l(w)}else return l(w)},l=d=>{try{const w=localStorage.getItem("unsynced_batches"),x=w?JSON.parse(w):[];return x.push(d),localStorage.setItem("unsynced_batches",JSON.stringify(x)),g(),{success:!0,mode:"offline"}}catch(w){return console.error("LocalStorage save failed:",w),{success:!1,error:w}}},f=async()=>{if(r){n(!0);try{const d=localStorage.getItem("unsynced_batches");if(!d){n(!1);return}const w=JSON.parse(d);console.log(`Syncing ${w.length} batches...`);const x=w.map(async P=>{const{synced:p,..._}=P;return Ke(Ve(Qe,"batches"),{..._,userId:r.uid,synced:!0})});await Promise.all(x),localStorage.removeItem("unsynced_batches"),g(),console.log("Sync complete!")}catch(d){console.error("Sync failed:",d)}finally{n(!1)}}};return{saveBatch:h,isOnline:t,isSyncing:a,unsyncedCount:u,syncOfflineBatches:f}},us=({isOpen:r,onClose:t})=>{const{saveBatch:s,isOnline:a}=ds(),{t:n}=ye(),[u,m]=X.useState(!1),[g,h]=X.useState({cropType:"Paddy/Rice",weight:"",harvestDate:"",division:"Dhaka",storageType:"Jute Bag"});X.useEffect(()=>{r&&(m(!1),h({cropType:"Paddy/Rice",weight:"",harvestDate:"",division:"Dhaka",storageType:"Jute Bag"}))},[r]);const l=async d=>{d.preventDefault(),m(!0);const w=setTimeout(()=>{m(!1),alert(n("addBatch.alert.timeout"))},6e4);try{const x=await s({...g,weight:Number(g.weight)});x.success&&(clearTimeout(w),m(!1),t(),x.mode==="offline"&&alert(n("addBatch.alert.offline")),h({cropType:"Paddy/Rice",weight:"",harvestDate:"",division:"Dhaka",storageType:"Jute Bag"}))}catch(x){console.error("Failed to add batch",x),alert(n("addBatch.alert.failed"))}finally{clearTimeout(w),m(!1)}},f=["Dhaka","Chittagong","Sylhet","Khulna","Rajshahi","Rangpur","Barisal","Mymensingh"];return r?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-xl animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:n("addBatch.title")}),a?e.jsxs("span",{className:"flex items-center gap-1 text-[10px] bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:[e.jsx(Pt,{size:10})," ",n("addBatch.online")]}):e.jsxs("span",{className:"flex items-center gap-1 text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full",children:[e.jsx(Tt,{size:10})," ",n("addBatch.offline")]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(Rt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:l,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:n("addBatch.cropType")}),e.jsxs("div",{className:"relative",children:[e.jsx(Ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsxs("select",{value:g.cropType,onChange:d=>h({...g,cropType:d.target.value}),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none",children:[e.jsx("option",{value:"Paddy/Rice",children:n("addBatch.crops.paddy")}),e.jsx("option",{value:"Wheat",children:n("addBatch.crops.wheat")}),e.jsx("option",{value:"Corn (Maize)",children:n("addBatch.crops.corn")}),e.jsx("option",{value:"Potato",children:n("addBatch.crops.potato")}),e.jsx("option",{value:"Mustard",children:n("addBatch.crops.mustard")}),e.jsx("option",{value:"Demo Potato",children:n("addBatch.crops.demo")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:n("addBatch.weight")}),e.jsxs("div",{className:"relative",children:[e.jsx(lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"number",placeholder:"0",required:!0,value:g.weight,onChange:d=>h({...g,weight:d.target.value}),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Moisture (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"number",placeholder:"14",required:!0,value:g.moistureContent||"",onChange:d=>h({...g,moistureContent:d.target.value}),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:n("addBatch.harvestDate")}),e.jsxs("div",{className:"relative",children:[e.jsx(dt,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",required:!0,value:g.harvestDate,onChange:d=>h({...g,harvestDate:d.target.value}),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:n("addBatch.division")}),e.jsxs("div",{className:"relative",children:[e.jsx($e,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("select",{value:g.division,onChange:d=>h({...g,division:d.target.value}),className:"w-full pl-10 pr-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none",children:f.map(d=>e.jsx("option",{value:d,children:d},d))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:n("addBatch.storageType")}),e.jsxs("select",{value:g.storageType,onChange:d=>h({...g,storageType:d.target.value}),className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none",children:[e.jsx("option",{value:"Jute Bag",children:n("addBatch.storage.jute")}),e.jsx("option",{value:"Silo",children:n("addBatch.storage.silo")}),e.jsx("option",{value:"Open Area",children:n("addBatch.storage.open")}),e.jsx("option",{value:"Plastic Drum",children:n("addBatch.storage.plastic")}),e.jsx("option",{value:"Cold Storage",children:n("addBatch.storage.cold")})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,disabled:u,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold py-3 rounded-xl transition-colors disabled:opacity-50",children:n("addBatch.cancel")}),e.jsx("button",{type:"submit",disabled:u,className:`flex-1 font-bold py-3 rounded-xl transition-colors shadow-lg disabled:opacity-50 ${a?"bg-emerald-600 hover:bg-emerald-700 text-white shadow-emerald-600/20":"bg-amber-500 hover:bg-amber-600 text-white shadow-amber-500/20"}`,children:n(u?"addBatch.saving":a?"addBatch.saveCloud":"addBatch.saveOffline")})]})]})]})}):null},hs=()=>{const{userData:r}=Ne(),{t,language:s}=ye(),[a,n]=X.useState(null),[u,m]=X.useState(!0),[g,h]=X.useState(null);if(X.useEffect(()=>{(async()=>{try{const p=r?.location?.split(",")[0]||"Dhaka",_=await It(p);n(_)}catch(p){console.error("Failed to load weather:",p),h("Weather data unavailable")}finally{m(!1)}})()},[r?.location]),u)return e.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 animate-pulse h-64 flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:t("weather.loading")})});if(g||!a)return e.jsxs("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-100 text-center text-red-600",children:[e.jsx(xe,{className:"mx-auto mb-2"}),e.jsx("p",{children:t("weather.unavailable")})]});const{current:l,forecast:f,location:d}=a,w=(P,p=24,_="")=>{switch(P){case"Clear":return e.jsx(Pe,{size:p,className:`text-orange-500 ${_}`});case"Clouds":return e.jsx(Ee,{size:p,className:`text-gray-500 ${_}`});case"Rain":return e.jsx(je,{size:p,className:`text-blue-500 ${_}`});case"Thunderstorm":return e.jsx(ct,{size:p,className:`text-purple-500 ${_}`});default:return e.jsx(Ee,{size:p,className:`text-gray-400 ${_}`})}},x={warning:"bg-red-50 border-red-200 text-red-800",alert:"bg-orange-50 border-orange-200 text-orange-800",success:"bg-emerald-50 border-emerald-200 text-emerald-800"};return e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 overflow-hidden mb-8",children:[e.jsxs("div",{className:"bg-farm-dark p-4 flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"text-farm-lime",size:18}),e.jsx("span",{className:"font-bold text-lg",children:d})]}),e.jsx("div",{className:"text-sm opacity-80",children:new Date().toLocaleDateString(s==="bn"?"bn-BD":"en-US",{weekday:"long",day:"numeric",month:"long"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[e.jsxs("div",{className:"flex-1 flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-gray-50 rounded-full",children:w(l.weather,64)}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-5xl font-bold text-gray-900 font-inter",children:[l.temp,"Â°",e.jsx("span",{className:"text-2xl text-gray-500",children:"C"})]}),e.jsx("div",{className:"text-lg text-gray-600 font-medium mt-1",children:t(`weather.condition.${l.weather}`)||l.weather}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Lt,{size:14})," ",l.humidity,"% ",t("weather.humidity")]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{size:14})," ",l.rainProb,"% ",t("weather.rainProb")]})]})]})]}),e.jsxs("div",{className:`flex-1 p-5 rounded-2xl border-2 flex items-start gap-4 ${x[l.advice.type]}`,children:[e.jsxs("div",{className:"p-2 bg-white/50 rounded-full shrink-0",children:[l.advice.type==="warning"&&e.jsx(je,{size:24}),l.advice.type==="alert"&&e.jsx(Pe,{size:24}),l.advice.type==="success"&&e.jsx(ze,{size:24})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg mb-1",children:t("weather.adviceTitle")}),e.jsx("p",{className:"font-medium leading-relaxed",children:t(`weather.advice.${l.advice.code}`)})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:f.map((P,p)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl border border-gray-100 flex flex-col items-center text-center",children:[e.jsx("span",{className:"text-sm font-bold text-gray-600 mb-2",children:t(`weather.days.${P.dayName}`)||P.dayName}),w(P.weather,28,"mb-2"),e.jsxs("div",{className:"font-bold text-gray-900 mb-1",children:[P.temp,"Â°C"]}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(je,{size:10})," ",P.rainProb,"%"]})]},p))})]})]})},fs=({size:r,className:t})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[e.jsx("path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),vs=()=>{const[r,t]=X.useState(!1),{userData:s}=Ne(),{t:a}=ye(),n=s?.name||a("dashboard.defaultName");return e.jsx(Bt,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:a("dashboard.title")}),e.jsx("p",{className:"text-gray-500",children:a("dashboard.welcome").replace("{name}",n)})]}),e.jsx(hs,{}),e.jsx(qt,{onAddBatch:()=>t(!0)}),e.jsx(Ut,{}),e.jsx(ls,{}),e.jsx(cs,{}),e.jsx(us,{isOpen:r,onClose:()=>t(!1)})]})})};export{vs as default};
